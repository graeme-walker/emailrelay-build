# test/makefile -- generated by ..\libexec\make2nmake

ARCH = x64
CONFIG = release
MBEDTLS_SRC_ROOT = ../../../mbedtls
MBEDTLS_BUILD_ROOT = ../../../mbedtls
QT_SRC_ROOT = ../../../qt-$(ARCH)-static
QT_BUILD_ROOT = ../../../qt-$(ARCH)-static
QT_MOC = $(QT_BUILD_ROOT)/bin/moc.exe
SRC_ROOT = ../..
BUILD_ROOT = ..

all: subdirs libs programs

subdirs:
    cd certificates && nmake -f makefile

libs: 

programs: emailrelay_test_scanner.exe emailrelay_test_client.exe emailrelay_test_server.exe emailrelay_test_dnsserver.exe emailrelay_test_verifier.exe

emailrelay_test_scanner.exe: emailrelay_test_scanner.obj 
    link /nologo /RELEASE /DYNAMICBASE /NXCOMPAT /INCREMENTAL:no /OPT:ref /MANIFEST:embed /SUBSYSTEM:console /out:emailrelay_test_scanner.exe emailrelay_test_scanner.obj ../src/gnet/gnet.lib ../src/gssl/gssl.lib ../src/win32/win32.lib ../src/glib/glib.lib $(MBEDTLS_BUILD_ROOT)/$(ARCH)/library/$(CONFIG)/mbedtls.lib $(MBEDTLS_BUILD_ROOT)/$(ARCH)/library/$(CONFIG)/mbedx509.lib $(MBEDTLS_BUILD_ROOT)/$(ARCH)/library/$(CONFIG)/mbedcrypto.lib ws2_32.lib shell32.lib iphlpapi.lib comctl32.lib advapi32.lib user32.lib gdi32.lib user32.lib kernel32.lib
    certutil -hashfile emailrelay_test_scanner.exe SHA256 > emailrelay_test_scanner.exe.sha256

emailrelay_test_client.exe: emailrelay_test_client.obj 
    link /nologo /RELEASE /DYNAMICBASE /NXCOMPAT /INCREMENTAL:no /OPT:ref /MANIFEST:embed /SUBSYSTEM:console /out:emailrelay_test_client.exe emailrelay_test_client.obj ws2_32.lib shell32.lib iphlpapi.lib comctl32.lib advapi32.lib user32.lib gdi32.lib user32.lib kernel32.lib
    certutil -hashfile emailrelay_test_client.exe SHA256 > emailrelay_test_client.exe.sha256

emailrelay_test_server.exe: emailrelay_test_server.obj 
    link /nologo /RELEASE /DYNAMICBASE /NXCOMPAT /INCREMENTAL:no /OPT:ref /MANIFEST:embed /SUBSYSTEM:console /out:emailrelay_test_server.exe emailrelay_test_server.obj ../src/gnet/gnet.lib ../src/gssl/gssl.lib ../src/win32/win32.lib ../src/glib/glib.lib $(MBEDTLS_BUILD_ROOT)/$(ARCH)/library/$(CONFIG)/mbedtls.lib $(MBEDTLS_BUILD_ROOT)/$(ARCH)/library/$(CONFIG)/mbedx509.lib $(MBEDTLS_BUILD_ROOT)/$(ARCH)/library/$(CONFIG)/mbedcrypto.lib ws2_32.lib shell32.lib iphlpapi.lib comctl32.lib advapi32.lib user32.lib gdi32.lib user32.lib kernel32.lib
    certutil -hashfile emailrelay_test_server.exe SHA256 > emailrelay_test_server.exe.sha256

emailrelay_test_dnsserver.exe: emailrelay_test_dnsserver.obj 
    link /nologo /RELEASE /DYNAMICBASE /NXCOMPAT /INCREMENTAL:no /OPT:ref /MANIFEST:embed /SUBSYSTEM:console /out:emailrelay_test_dnsserver.exe emailrelay_test_dnsserver.obj ../src/gnet/gnet.lib ../src/gssl/gssl.lib ../src/win32/win32.lib ../src/glib/glib.lib $(MBEDTLS_BUILD_ROOT)/$(ARCH)/library/$(CONFIG)/mbedtls.lib $(MBEDTLS_BUILD_ROOT)/$(ARCH)/library/$(CONFIG)/mbedx509.lib $(MBEDTLS_BUILD_ROOT)/$(ARCH)/library/$(CONFIG)/mbedcrypto.lib ws2_32.lib shell32.lib iphlpapi.lib comctl32.lib advapi32.lib user32.lib gdi32.lib user32.lib kernel32.lib
    certutil -hashfile emailrelay_test_dnsserver.exe SHA256 > emailrelay_test_dnsserver.exe.sha256

emailrelay_test_verifier.exe: emailrelay_test_verifier.obj 
    link /nologo /RELEASE /DYNAMICBASE /NXCOMPAT /INCREMENTAL:no /OPT:ref /MANIFEST:embed /SUBSYSTEM:console /out:emailrelay_test_verifier.exe emailrelay_test_verifier.obj ../src/gnet/gnet.lib ../src/gssl/gssl.lib ../src/win32/win32.lib ../src/glib/glib.lib $(MBEDTLS_BUILD_ROOT)/$(ARCH)/library/$(CONFIG)/mbedtls.lib $(MBEDTLS_BUILD_ROOT)/$(ARCH)/library/$(CONFIG)/mbedx509.lib $(MBEDTLS_BUILD_ROOT)/$(ARCH)/library/$(CONFIG)/mbedcrypto.lib ws2_32.lib shell32.lib iphlpapi.lib comctl32.lib advapi32.lib user32.lib gdi32.lib user32.lib kernel32.lib
    certutil -hashfile emailrelay_test_verifier.exe SHA256 > emailrelay_test_verifier.exe.sha256

CPPFLAGS = /nologo /DGCONFIG_NO_GCONFIG_DEFS /DG_QT_STATIC /EHsc /I. /D"G_SPOOLDIR=c:/emailrelay" /DG_WINDOWS=1 /DWIN32 /D_WINDOWS /DNDEBUG /W4 /WX /MT /O2 /Ob2 /I../. /I../.. /I../../src /I../../src/glib /I../../src/gssl /I../../src/gnet

emailrelay_test_client.obj: $(SRC_ROOT)/test/emailrelay_test_client.cpp
    $(CPP) $(CPPFLAGS) /c $?

emailrelay_test_dnsserver.obj: $(SRC_ROOT)/test/emailrelay_test_dnsserver.cpp
    $(CPP) $(CPPFLAGS) /c $?

emailrelay_test_scanner.obj: $(SRC_ROOT)/test/emailrelay_test_scanner.cpp
    $(CPP) $(CPPFLAGS) /c $?

emailrelay_test_server.obj: $(SRC_ROOT)/test/emailrelay_test_server.cpp
    $(CPP) $(CPPFLAGS) /c $?

emailrelay_test_verifier.obj: $(SRC_ROOT)/test/emailrelay_test_verifier.cpp
    $(CPP) $(CPPFLAGS) /c $?


